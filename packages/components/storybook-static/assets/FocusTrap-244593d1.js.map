{"version":3,"file":"FocusTrap-244593d1.js","sources":["../../node_modules/focus-lock/dist/es2015/constants.js","../../node_modules/react-focus-lock/dist/es2015/FocusGuard.js","../../node_modules/react-focus-lock/dist/es2015/medium.js","../../node_modules/react-focus-lock/dist/es2015/Lock.js","../../node_modules/react-clientside-effect/lib/index.es.js","../../node_modules/focus-lock/dist/es2015/utils/array.js","../../node_modules/focus-lock/dist/es2015/utils/is.js","../../node_modules/focus-lock/dist/es2015/utils/tabOrder.js","../../node_modules/focus-lock/dist/es2015/utils/tabbables.js","../../node_modules/focus-lock/dist/es2015/utils/tabUtils.js","../../node_modules/focus-lock/dist/es2015/utils/DOMutils.js","../../node_modules/focus-lock/dist/es2015/utils/all-affected.js","../../node_modules/focus-lock/dist/es2015/utils/safe.js","../../node_modules/focus-lock/dist/es2015/utils/getActiveElement.js","../../node_modules/focus-lock/dist/es2015/focusInside.js","../../node_modules/focus-lock/dist/es2015/focusIsHidden.js","../../node_modules/focus-lock/dist/es2015/utils/correctFocus.js","../../node_modules/focus-lock/dist/es2015/utils/firstFocus.js","../../node_modules/focus-lock/dist/es2015/solver.js","../../node_modules/focus-lock/dist/es2015/utils/auto-focus.js","../../node_modules/focus-lock/dist/es2015/utils/parenting.js","../../node_modules/focus-lock/dist/es2015/focusMerge.js","../../node_modules/focus-lock/dist/es2015/focusables.js","../../node_modules/focus-lock/dist/es2015/setFocus.js","../../node_modules/react-focus-lock/dist/es2015/util.js","../../node_modules/react-focus-lock/dist/es2015/Trap.js","../../node_modules/react-focus-lock/dist/es2015/Combination.js","../../FocusTrap/FocusTrap.tsx"],"sourcesContent":["/**\n * defines a focus group\n */\nexport var FOCUS_GROUP = 'data-focus-lock';\n/**\n * disables element discovery inside a group marked by key\n */\nexport var FOCUS_DISABLED = 'data-focus-lock-disabled';\n/**\n * allows uncontrolled focus within the marked area, effectively disabling focus lock for it's content\n */\nexport var FOCUS_ALLOW = 'data-no-focus-lock';\n/**\n * instructs autofocus engine to pick default autofocus inside a given node\n * can be set on the element or container\n */\nexport var FOCUS_AUTO = 'data-autofocus-inside';\n/**\n * instructs autofocus to ignore elements within a given node\n * can be set on the element or container\n */\nexport var FOCUS_NO_AUTOFOCUS = 'data-no-autofocus';\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\nexport var hiddenGuard = {\n  width: '1px',\n  height: '0px',\n  padding: 0,\n  overflow: 'hidden',\n  position: 'fixed',\n  top: '1px',\n  left: '1px'\n};\n\nvar InFocusGuard = function InFocusGuard(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    key: \"guard-first\",\n    \"data-focus-guard\": true,\n    \"data-focus-auto-guard\": true,\n    style: hiddenGuard\n  }), children, children && /*#__PURE__*/React.createElement(\"div\", {\n    key: \"guard-last\",\n    \"data-focus-guard\": true,\n    \"data-focus-auto-guard\": true,\n    style: hiddenGuard\n  }));\n};\n\nInFocusGuard.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: PropTypes.node\n} : {};\nInFocusGuard.defaultProps = {\n  children: null\n};\nexport default InFocusGuard;","import { createMedium, createSidecarMedium } from 'use-sidecar';\nexport var mediumFocus = createMedium({}, function (_ref) {\n  var target = _ref.target,\n      currentTarget = _ref.currentTarget;\n  return {\n    target: target,\n    currentTarget: currentTarget\n  };\n});\nexport var mediumBlur = createMedium();\nexport var mediumEffect = createMedium();\nexport var mediumSidecar = createSidecarMedium({\n  async: true // focus-lock sidecar is not required on the server\n  // however, it might be required for JSDOM tests\n  // ssr: true,\n\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { node, bool, string, any, arrayOf, oneOfType, object, func } from 'prop-types';\nimport * as constants from 'focus-lock/constants';\nimport { useMergeRefs } from 'use-callback-ref';\nimport { useEffect } from 'react';\nimport { hiddenGuard } from './FocusGuard';\nimport { mediumFocus, mediumBlur, mediumSidecar } from './medium';\nvar emptyArray = [];\nvar FocusLock = /*#__PURE__*/React.forwardRef(function FocusLockUI(props, parentRef) {\n  var _extends2;\n\n  var _React$useState = React.useState(),\n      realObserved = _React$useState[0],\n      setObserved = _React$useState[1];\n\n  var observed = React.useRef();\n  var isActive = React.useRef(false);\n  var originalFocusedElement = React.useRef(null);\n  var children = props.children,\n      disabled = props.disabled,\n      noFocusGuards = props.noFocusGuards,\n      persistentFocus = props.persistentFocus,\n      crossFrame = props.crossFrame,\n      autoFocus = props.autoFocus,\n      allowTextSelection = props.allowTextSelection,\n      group = props.group,\n      className = props.className,\n      whiteList = props.whiteList,\n      hasPositiveIndices = props.hasPositiveIndices,\n      _props$shards = props.shards,\n      shards = _props$shards === void 0 ? emptyArray : _props$shards,\n      _props$as = props.as,\n      Container = _props$as === void 0 ? 'div' : _props$as,\n      _props$lockProps = props.lockProps,\n      containerProps = _props$lockProps === void 0 ? {} : _props$lockProps,\n      SideCar = props.sideCar,\n      shouldReturnFocus = props.returnFocus,\n      focusOptions = props.focusOptions,\n      onActivationCallback = props.onActivation,\n      onDeactivationCallback = props.onDeactivation;\n\n  var _React$useState2 = React.useState({}),\n      id = _React$useState2[0]; // SIDE EFFECT CALLBACKS\n\n\n  var onActivation = React.useCallback(function () {\n    originalFocusedElement.current = originalFocusedElement.current || document && document.activeElement;\n\n    if (observed.current && onActivationCallback) {\n      onActivationCallback(observed.current);\n    }\n\n    isActive.current = true;\n  }, [onActivationCallback]);\n  var onDeactivation = React.useCallback(function () {\n    isActive.current = false;\n\n    if (onDeactivationCallback) {\n      onDeactivationCallback(observed.current);\n    }\n  }, [onDeactivationCallback]);\n  useEffect(function () {\n    if (!disabled) {\n      // cleanup return focus on trap deactivation\n      // sideEffect/returnFocus should happen by this time\n      originalFocusedElement.current = null;\n    }\n  }, []);\n  var returnFocus = React.useCallback(function (allowDefer) {\n    var returnFocusTo = originalFocusedElement.current;\n\n    if (returnFocusTo && returnFocusTo.focus) {\n      var howToReturnFocus = typeof shouldReturnFocus === 'function' ? shouldReturnFocus(returnFocusTo) : shouldReturnFocus;\n\n      if (howToReturnFocus) {\n        var returnFocusOptions = typeof howToReturnFocus === 'object' ? howToReturnFocus : undefined;\n        originalFocusedElement.current = null;\n\n        if (allowDefer) {\n          // React might return focus after update\n          // it's safer to defer the action\n          Promise.resolve().then(function () {\n            return returnFocusTo.focus(returnFocusOptions);\n          });\n        } else {\n          returnFocusTo.focus(returnFocusOptions);\n        }\n      }\n    }\n  }, [shouldReturnFocus]); // MEDIUM CALLBACKS\n\n  var onFocus = React.useCallback(function (event) {\n    if (isActive.current) {\n      mediumFocus.useMedium(event);\n    }\n  }, []);\n  var onBlur = mediumBlur.useMedium; // REF PROPAGATION\n  // not using real refs due to race conditions\n\n  var setObserveNode = React.useCallback(function (newObserved) {\n    if (observed.current !== newObserved) {\n      observed.current = newObserved;\n      setObserved(newObserved);\n    }\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof allowTextSelection !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn('React-Focus-Lock: allowTextSelection is deprecated and enabled by default');\n    }\n\n    React.useEffect(function () {\n      // report incorrect integration - https://github.com/theKashey/react-focus-lock/issues/123\n      if (!observed.current && typeof Container !== 'string') {\n        // eslint-disable-next-line no-console\n        console.error('FocusLock: could not obtain ref to internal node');\n      }\n    }, []);\n  }\n\n  var lockProps = _extends((_extends2 = {}, _extends2[constants.FOCUS_DISABLED] = disabled && 'disabled', _extends2[constants.FOCUS_GROUP] = group, _extends2), containerProps);\n\n  var hasLeadingGuards = noFocusGuards !== true;\n  var hasTailingGuards = hasLeadingGuards && noFocusGuards !== 'tail';\n  var mergedRef = useMergeRefs([parentRef, setObserveNode]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, hasLeadingGuards && [\n  /*#__PURE__*/\n  // nearest focus guard\n  React.createElement(\"div\", {\n    key: \"guard-first\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }), // first tabbed element guard\n  hasPositiveIndices ? /*#__PURE__*/React.createElement(\"div\", {\n    key: \"guard-nearest\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 1,\n    style: hiddenGuard\n  }) : null], !disabled && /*#__PURE__*/React.createElement(SideCar, {\n    id: id,\n    sideCar: mediumSidecar,\n    observed: realObserved,\n    disabled: disabled,\n    persistentFocus: persistentFocus,\n    crossFrame: crossFrame,\n    autoFocus: autoFocus,\n    whiteList: whiteList,\n    shards: shards,\n    onActivation: onActivation,\n    onDeactivation: onDeactivation,\n    returnFocus: returnFocus,\n    focusOptions: focusOptions\n  }), /*#__PURE__*/React.createElement(Container, _extends({\n    ref: mergedRef\n  }, lockProps, {\n    className: className,\n    onBlur: onBlur,\n    onFocus: onFocus\n  }), children), hasTailingGuards && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }));\n});\nFocusLock.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: node,\n  disabled: bool,\n  returnFocus: oneOfType([bool, object, func]),\n  focusOptions: object,\n  noFocusGuards: bool,\n  hasPositiveIndices: bool,\n  allowTextSelection: bool,\n  autoFocus: bool,\n  persistentFocus: bool,\n  crossFrame: bool,\n  group: string,\n  className: string,\n  whiteList: func,\n  shards: arrayOf(any),\n  as: oneOfType([string, func, object]),\n  lockProps: object,\n  onActivation: func,\n  onDeactivation: func,\n  sideCar: any.isRequired\n} : {};\nFocusLock.defaultProps = {\n  children: undefined,\n  disabled: false,\n  returnFocus: false,\n  focusOptions: undefined,\n  noFocusGuards: false,\n  autoFocus: true,\n  persistentFocus: false,\n  crossFrame: true,\n  hasPositiveIndices: undefined,\n  allowTextSelection: undefined,\n  group: undefined,\n  className: undefined,\n  whiteList: undefined,\n  shards: undefined,\n  as: 'div',\n  lockProps: {},\n  onActivation: undefined,\n  onDeactivation: undefined\n};\nexport default FocusLock;","import _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport React, { PureComponent } from 'react';\n\nfunction withSideEffect(reducePropsToState, handleStateChangeOnClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof reducePropsToState !== 'function') {\n      throw new Error('Expected reducePropsToState to be a function.');\n    }\n\n    if (typeof handleStateChangeOnClient !== 'function') {\n      throw new Error('Expected handleStateChangeOnClient to be a function.');\n    }\n  }\n\n  function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  }\n\n  return function wrap(WrappedComponent) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof WrappedComponent !== 'function') {\n        throw new Error('Expected WrappedComponent to be a React component.');\n      }\n    }\n\n    var mountedInstances = [];\n    var state;\n\n    function emitChange() {\n      state = reducePropsToState(mountedInstances.map(function (instance) {\n        return instance.props;\n      }));\n      handleStateChangeOnClient(state);\n    }\n\n    var SideEffect = /*#__PURE__*/function (_PureComponent) {\n      _inheritsLoose(SideEffect, _PureComponent);\n\n      function SideEffect() {\n        return _PureComponent.apply(this, arguments) || this;\n      }\n\n      // Try to use displayName of wrapped component\n      SideEffect.peek = function peek() {\n        return state;\n      };\n\n      var _proto = SideEffect.prototype;\n\n      _proto.componentDidMount = function componentDidMount() {\n        mountedInstances.push(this);\n        emitChange();\n      };\n\n      _proto.componentDidUpdate = function componentDidUpdate() {\n        emitChange();\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        var index = mountedInstances.indexOf(this);\n        mountedInstances.splice(index, 1);\n        emitChange();\n      };\n\n      _proto.render = function render() {\n        return /*#__PURE__*/React.createElement(WrappedComponent, this.props);\n      };\n\n      return SideEffect;\n    }(PureComponent);\n\n    _defineProperty(SideEffect, \"displayName\", \"SideEffect(\" + getDisplayName(WrappedComponent) + \")\");\n\n    return SideEffect;\n  };\n}\n\nexport default withSideEffect;\n","/*\nIE11 support\n */\nexport var toArray = function (a) {\n    var ret = Array(a.length);\n    for (var i = 0; i < a.length; ++i) {\n        ret[i] = a[i];\n    }\n    return ret;\n};\nexport var asArray = function (a) { return (Array.isArray(a) ? a : [a]); };\nexport var getFirst = function (a) { return (Array.isArray(a) ? a[0] : a); };\n","import { FOCUS_NO_AUTOFOCUS } from '../constants';\nvar isElementHidden = function (node) {\n    // we can measure only \"elements\"\n    // consider others as \"visible\"\n    if (node.nodeType !== Node.ELEMENT_NODE) {\n        return false;\n    }\n    var computedStyle = window.getComputedStyle(node, null);\n    if (!computedStyle || !computedStyle.getPropertyValue) {\n        return false;\n    }\n    return (computedStyle.getPropertyValue('display') === 'none' || computedStyle.getPropertyValue('visibility') === 'hidden');\n};\nvar getParentNode = function (node) {\n    // DOCUMENT_FRAGMENT_NODE can also point on ShadowRoot. In this case .host will point on the next node\n    return node.parentNode && node.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\n        ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            node.parentNode.host\n        : node.parentNode;\n};\nvar isTopNode = function (node) {\n    // @ts-ignore\n    return node === document || (node && node.nodeType === Node.DOCUMENT_NODE);\n};\nvar isVisibleUncached = function (node, checkParent) {\n    return !node || isTopNode(node) || (!isElementHidden(node) && checkParent(getParentNode(node)));\n};\nexport var isVisibleCached = function (visibilityCache, node) {\n    var cached = visibilityCache.get(node);\n    if (cached !== undefined) {\n        return cached;\n    }\n    var result = isVisibleUncached(node, isVisibleCached.bind(undefined, visibilityCache));\n    visibilityCache.set(node, result);\n    return result;\n};\nvar isAutoFocusAllowedUncached = function (node, checkParent) {\n    return node && !isTopNode(node) ? (isAutoFocusAllowed(node) ? checkParent(getParentNode(node)) : false) : true;\n};\nexport var isAutoFocusAllowedCached = function (cache, node) {\n    var cached = cache.get(node);\n    if (cached !== undefined) {\n        return cached;\n    }\n    var result = isAutoFocusAllowedUncached(node, isAutoFocusAllowedCached.bind(undefined, cache));\n    cache.set(node, result);\n    return result;\n};\nexport var getDataset = function (node) {\n    // @ts-ignore\n    return node.dataset;\n};\nexport var isHTMLButtonElement = function (node) { return node.tagName === 'BUTTON'; };\nexport var isHTMLInputElement = function (node) { return node.tagName === 'INPUT'; };\nexport var isRadioElement = function (node) {\n    return isHTMLInputElement(node) && node.type === 'radio';\n};\nexport var notHiddenInput = function (node) {\n    return !((isHTMLInputElement(node) || isHTMLButtonElement(node)) && (node.type === 'hidden' || node.disabled));\n};\nexport var isAutoFocusAllowed = function (node) {\n    var attribute = node.getAttribute(FOCUS_NO_AUTOFOCUS);\n    return ![true, 'true', ''].includes(attribute);\n};\nexport var isGuard = function (node) { var _a; return Boolean(node && ((_a = getDataset(node)) === null || _a === void 0 ? void 0 : _a.focusGuard)); };\nexport var isNotAGuard = function (node) { return !isGuard(node); };\nexport var isDefined = function (x) { return Boolean(x); };\n","import { toArray } from './array';\nexport var tabSort = function (a, b) {\n    var tabDiff = a.tabIndex - b.tabIndex;\n    var indexDiff = a.index - b.index;\n    if (tabDiff) {\n        if (!a.tabIndex) {\n            return 1;\n        }\n        if (!b.tabIndex) {\n            return -1;\n        }\n    }\n    return tabDiff || indexDiff;\n};\nexport var orderByTabIndex = function (nodes, filterNegative, keepGuards) {\n    return toArray(nodes)\n        .map(function (node, index) { return ({\n        node: node,\n        index: index,\n        tabIndex: keepGuards && node.tabIndex === -1 ? ((node.dataset || {}).focusGuard ? 0 : -1) : node.tabIndex,\n    }); })\n        .filter(function (data) { return !filterNegative || data.tabIndex >= 0; })\n        .sort(tabSort);\n};\n","/**\n * list of the object to be considered as focusable\n */\nexport var tabbables = [\n    'button:enabled',\n    'select:enabled',\n    'textarea:enabled',\n    'input:enabled',\n    // elements with explicit roles will also use explicit tabindex\n    // '[role=\"button\"]',\n    'a[href]',\n    'area[href]',\n    'summary',\n    'iframe',\n    'object',\n    'embed',\n    'audio[controls]',\n    'video[controls]',\n    '[tabindex]',\n    '[contenteditable]',\n    '[autofocus]',\n];\n","import { FOCUS_AUTO } from '../constants';\nimport { toArray } from './array';\nimport { tabbables } from './tabbables';\nvar queryTabbables = tabbables.join(',');\nvar queryGuardTabbables = \"\".concat(queryTabbables, \", [data-focus-guard]\");\nvar getFocusablesWithShadowDom = function (parent, withGuards) {\n    return toArray((parent.shadowRoot || parent).children).reduce(function (acc, child) {\n        return acc.concat(child.matches(withGuards ? queryGuardTabbables : queryTabbables) ? [child] : [], getFocusablesWithShadowDom(child));\n    }, []);\n};\nvar getFocusablesWithIFrame = function (parent, withGuards) {\n    var _a;\n    // contentDocument of iframe will be null if current origin cannot access it\n    if (parent instanceof HTMLIFrameElement && ((_a = parent.contentDocument) === null || _a === void 0 ? void 0 : _a.body)) {\n        return getFocusables([parent.contentDocument.body], withGuards);\n    }\n    return [parent];\n};\nexport var getFocusables = function (parents, withGuards) {\n    return parents.reduce(function (acc, parent) {\n        var _a;\n        var focusableWithShadowDom = getFocusablesWithShadowDom(parent, withGuards);\n        var focusableWithIframes = (_a = []).concat.apply(_a, focusableWithShadowDom.map(function (node) { return getFocusablesWithIFrame(node, withGuards); }));\n        return acc.concat(\n        // add all tabbables inside and within shadow DOMs in DOM order\n        focusableWithIframes, \n        // add if node is tabbable itself\n        parent.parentNode\n            ? toArray(parent.parentNode.querySelectorAll(queryTabbables)).filter(function (node) { return node === parent; })\n            : []);\n    }, []);\n};\n/**\n * return a list of focusable nodes within an area marked as \"auto-focusable\"\n * @param parent\n */\nexport var getParentAutofocusables = function (parent) {\n    var parentFocus = parent.querySelectorAll(\"[\".concat(FOCUS_AUTO, \"]\"));\n    return toArray(parentFocus)\n        .map(function (node) { return getFocusables([node]); })\n        .reduce(function (acc, nodes) { return acc.concat(nodes); }, []);\n};\n","import { toArray } from './array';\nimport { isAutoFocusAllowedCached, isVisibleCached, notHiddenInput } from './is';\nimport { orderByTabIndex } from './tabOrder';\nimport { getFocusables, getParentAutofocusables } from './tabUtils';\n/**\n * given list of focusable elements keeps the ones user can interact with\n * @param nodes\n * @param visibilityCache\n */\nexport var filterFocusable = function (nodes, visibilityCache) {\n    return toArray(nodes)\n        .filter(function (node) { return isVisibleCached(visibilityCache, node); })\n        .filter(function (node) { return notHiddenInput(node); });\n};\nexport var filterAutoFocusable = function (nodes, cache) {\n    if (cache === void 0) { cache = new Map(); }\n    return toArray(nodes).filter(function (node) { return isAutoFocusAllowedCached(cache, node); });\n};\n/**\n * only tabbable ones\n * (but with guards which would be ignored)\n */\nexport var getTabbableNodes = function (topNodes, visibilityCache, withGuards) {\n    return orderByTabIndex(filterFocusable(getFocusables(topNodes, withGuards), visibilityCache), true, withGuards);\n};\n/**\n * actually anything \"focusable\", not only tabbable\n * (without guards, as long as they are not expected to be focused)\n */\nexport var getAllTabbableNodes = function (topNodes, visibilityCache) {\n    return orderByTabIndex(filterFocusable(getFocusables(topNodes), visibilityCache), false);\n};\n/**\n * return list of nodes which are expected to be auto-focused\n * @param topNode\n * @param visibilityCache\n */\nexport var parentAutofocusables = function (topNode, visibilityCache) {\n    return filterFocusable(getParentAutofocusables(topNode), visibilityCache);\n};\n/*\n * Determines if element is contained in scope, including nested shadow DOMs\n */\nexport var contains = function (scope, element) {\n    if (scope.shadowRoot) {\n        return contains(scope.shadowRoot, element);\n    }\n    else {\n        if (Object.getPrototypeOf(scope).contains !== undefined &&\n            Object.getPrototypeOf(scope).contains.call(scope, element)) {\n            return true;\n        }\n        return toArray(scope.children).some(function (child) {\n            var _a;\n            if (child instanceof HTMLIFrameElement) {\n                var iframeBody = (_a = child.contentDocument) === null || _a === void 0 ? void 0 : _a.body;\n                if (iframeBody) {\n                    return contains(iframeBody, element);\n                }\n                return false;\n            }\n            return contains(child, element);\n        });\n    }\n};\n","import { FOCUS_DISABLED, FOCUS_GROUP } from '../constants';\nimport { asArray, toArray } from './array';\n/**\n * in case of multiple nodes nested inside each other\n * keeps only top ones\n * this is O(nlogn)\n * @param nodes\n * @returns {*}\n */\nvar filterNested = function (nodes) {\n    var contained = new Set();\n    var l = nodes.length;\n    for (var i = 0; i < l; i += 1) {\n        for (var j = i + 1; j < l; j += 1) {\n            var position = nodes[i].compareDocumentPosition(nodes[j]);\n            /* eslint-disable no-bitwise */\n            if ((position & Node.DOCUMENT_POSITION_CONTAINED_BY) > 0) {\n                contained.add(j);\n            }\n            if ((position & Node.DOCUMENT_POSITION_CONTAINS) > 0) {\n                contained.add(i);\n            }\n            /* eslint-enable */\n        }\n    }\n    return nodes.filter(function (_, index) { return !contained.has(index); });\n};\n/**\n * finds top most parent for a node\n * @param node\n * @returns {*}\n */\nvar getTopParent = function (node) {\n    return node.parentNode ? getTopParent(node.parentNode) : node;\n};\n/**\n * returns all \"focus containers\" inside a given node\n * @param node\n * @returns {T}\n */\nexport var getAllAffectedNodes = function (node) {\n    var nodes = asArray(node);\n    return nodes.filter(Boolean).reduce(function (acc, currentNode) {\n        var group = currentNode.getAttribute(FOCUS_GROUP);\n        acc.push.apply(acc, (group\n            ? filterNested(toArray(getTopParent(currentNode).querySelectorAll(\"[\".concat(FOCUS_GROUP, \"=\\\"\").concat(group, \"\\\"]:not([\").concat(FOCUS_DISABLED, \"=\\\"disabled\\\"])\"))))\n            : [currentNode]));\n        return acc;\n    }, []);\n};\n","export var safeProbe = function (cb) {\n    try {\n        return cb();\n    }\n    catch (e) {\n        return undefined;\n    }\n};\n","/**\n * returns active element from document or from nested shadowdoms\n */\nimport { safeProbe } from './safe';\nexport var getActiveElement = function (inDocument) {\n    if (inDocument === void 0) { inDocument = document; }\n    if (!inDocument || !inDocument.activeElement) {\n        return undefined;\n    }\n    var activeElement = inDocument.activeElement;\n    return (activeElement.shadowRoot\n        ? getActiveElement(activeElement.shadowRoot)\n        : activeElement instanceof HTMLIFrameElement && safeProbe(function () { return activeElement.contentWindow.document; })\n            ? getActiveElement(activeElement.contentWindow.document)\n            : activeElement);\n};\n","import { contains } from './utils/DOMutils';\nimport { getAllAffectedNodes } from './utils/all-affected';\nimport { getFirst, toArray } from './utils/array';\nimport { getActiveElement } from './utils/getActiveElement';\nvar focusInFrame = function (frame, activeElement) { return frame === activeElement; };\nvar focusInsideIframe = function (topNode, activeElement) {\n    return Boolean(toArray(topNode.querySelectorAll('iframe')).some(function (node) { return focusInFrame(node, activeElement); }));\n};\n/**\n * @returns {Boolean} true, if the current focus is inside given node or nodes\n */\nexport var focusInside = function (topNode, activeElement) {\n    // const activeElement = document && getActiveElement();\n    if (activeElement === void 0) { activeElement = getActiveElement(getFirst(topNode).ownerDocument); }\n    if (!activeElement || (activeElement.dataset && activeElement.dataset.focusGuard)) {\n        return false;\n    }\n    return getAllAffectedNodes(topNode).some(function (node) {\n        return contains(node, activeElement) || focusInsideIframe(node, activeElement);\n    });\n};\n","import { FOCUS_ALLOW } from './constants';\nimport { contains } from './utils/DOMutils';\nimport { toArray } from './utils/array';\nimport { getActiveElement } from './utils/getActiveElement';\n/**\n * focus is hidden FROM the focus-lock\n * ie contained inside a node focus-lock shall ignore\n * @returns {boolean} focus is currently is in \"allow\" area\n */\nexport var focusIsHidden = function (inDocument) {\n    if (inDocument === void 0) { inDocument = document; }\n    var activeElement = getActiveElement(inDocument);\n    if (!activeElement) {\n        return false;\n    }\n    // this does not support setting FOCUS_ALLOW within shadow dom\n    return toArray(inDocument.querySelectorAll(\"[\".concat(FOCUS_ALLOW, \"]\"))).some(function (node) { return contains(node, activeElement); });\n};\n","import { isRadioElement } from './is';\nvar findSelectedRadio = function (node, nodes) {\n    return nodes\n        .filter(isRadioElement)\n        .filter(function (el) { return el.name === node.name; })\n        .filter(function (el) { return el.checked; })[0] || node;\n};\nexport var correctNode = function (node, nodes) {\n    if (isRadioElement(node) && node.name) {\n        return findSelectedRadio(node, nodes);\n    }\n    return node;\n};\n/**\n * giving a set of radio inputs keeps only selected (tabbable) ones\n * @param nodes\n */\nexport var correctNodes = function (nodes) {\n    // IE11 has no Set(array) constructor\n    var resultSet = new Set();\n    nodes.forEach(function (node) { return resultSet.add(correctNode(node, nodes)); });\n    // using filter to support IE11\n    return nodes.filter(function (node) { return resultSet.has(node); });\n};\n","import { correctNode } from './correctFocus';\nexport var pickFirstFocus = function (nodes) {\n    if (nodes[0] && nodes.length > 1) {\n        return correctNode(nodes[0], nodes);\n    }\n    return nodes[0];\n};\nexport var pickFocusable = function (nodes, index) {\n    if (nodes.length > 1) {\n        return nodes.indexOf(correctNode(nodes[index], nodes));\n    }\n    return index;\n};\n","import { correctNodes } from './utils/correctFocus';\nimport { pickFocusable } from './utils/firstFocus';\nimport { isGuard } from './utils/is';\nexport var NEW_FOCUS = 'NEW_FOCUS';\n/**\n * Main solver for the \"find next focus\" question\n * @param innerNodes\n * @param outerNodes\n * @param activeElement\n * @param lastNode\n * @returns {number|string|undefined|*}\n */\nexport var newFocus = function (innerNodes, outerNodes, activeElement, lastNode) {\n    var cnt = innerNodes.length;\n    var firstFocus = innerNodes[0];\n    var lastFocus = innerNodes[cnt - 1];\n    var isOnGuard = isGuard(activeElement);\n    // focus is inside\n    if (activeElement && innerNodes.indexOf(activeElement) >= 0) {\n        return undefined;\n    }\n    var activeIndex = activeElement !== undefined ? outerNodes.indexOf(activeElement) : -1;\n    var lastIndex = lastNode ? outerNodes.indexOf(lastNode) : activeIndex;\n    var lastNodeInside = lastNode ? innerNodes.indexOf(lastNode) : -1;\n    var indexDiff = activeIndex - lastIndex;\n    var firstNodeIndex = outerNodes.indexOf(firstFocus);\n    var lastNodeIndex = outerNodes.indexOf(lastFocus);\n    var correctedNodes = correctNodes(outerNodes);\n    var correctedIndex = activeElement !== undefined ? correctedNodes.indexOf(activeElement) : -1;\n    var correctedIndexDiff = correctedIndex - (lastNode ? correctedNodes.indexOf(lastNode) : activeIndex);\n    var returnFirstNode = pickFocusable(innerNodes, 0);\n    var returnLastNode = pickFocusable(innerNodes, cnt - 1);\n    // new focus\n    if (activeIndex === -1 || lastNodeInside === -1) {\n        return NEW_FOCUS;\n    }\n    // old focus\n    if (!indexDiff && lastNodeInside >= 0) {\n        return lastNodeInside;\n    }\n    // first element\n    if (activeIndex <= firstNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\n        return returnLastNode;\n    }\n    // last element\n    if (activeIndex >= lastNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\n        return returnFirstNode;\n    }\n    // jump out, but not on the guard\n    if (indexDiff && Math.abs(correctedIndexDiff) > 1) {\n        return lastNodeInside;\n    }\n    // focus above lock\n    if (activeIndex <= firstNodeIndex) {\n        return returnLastNode;\n    }\n    // focus below lock\n    if (activeIndex > lastNodeIndex) {\n        return returnFirstNode;\n    }\n    // index is inside tab order, but outside Lock\n    if (indexDiff) {\n        if (Math.abs(indexDiff) > 1) {\n            return lastNodeInside;\n        }\n        return (cnt + lastNodeInside + indexDiff) % cnt;\n    }\n    // do nothing\n    return undefined;\n};\n","import { filterAutoFocusable } from './DOMutils';\nimport { pickFirstFocus } from './firstFocus';\nimport { getDataset } from './is';\nvar findAutoFocused = function (autoFocusables) {\n    return function (node) {\n        var _a;\n        var autofocus = (_a = getDataset(node)) === null || _a === void 0 ? void 0 : _a.autofocus;\n        return (\n        // @ts-expect-error\n        node.autofocus ||\n            //\n            (autofocus !== undefined && autofocus !== 'false') ||\n            //\n            autoFocusables.indexOf(node) >= 0);\n    };\n};\nexport var pickAutofocus = function (nodesIndexes, orderedNodes, groups) {\n    var nodes = nodesIndexes.map(function (_a) {\n        var node = _a.node;\n        return node;\n    });\n    var autoFocusable = filterAutoFocusable(nodes.filter(findAutoFocused(groups)));\n    if (autoFocusable && autoFocusable.length) {\n        return pickFirstFocus(autoFocusable);\n    }\n    return pickFirstFocus(filterAutoFocusable(orderedNodes));\n};\n","import { parentAutofocusables } from './DOMutils';\nimport { contains } from './DOMutils';\nimport { asArray } from './array';\nvar getParents = function (node, parents) {\n    if (parents === void 0) { parents = []; }\n    parents.push(node);\n    if (node.parentNode) {\n        getParents(node.parentNode.host || node.parentNode, parents);\n    }\n    return parents;\n};\n/**\n * finds a parent for both nodeA and nodeB\n * @param nodeA\n * @param nodeB\n * @returns {boolean|*}\n */\nexport var getCommonParent = function (nodeA, nodeB) {\n    var parentsA = getParents(nodeA);\n    var parentsB = getParents(nodeB);\n    // tslint:disable-next-line:prefer-for-of\n    for (var i = 0; i < parentsA.length; i += 1) {\n        var currentParent = parentsA[i];\n        if (parentsB.indexOf(currentParent) >= 0) {\n            return currentParent;\n        }\n    }\n    return false;\n};\nexport var getTopCommonParent = function (baseActiveElement, leftEntry, rightEntries) {\n    var activeElements = asArray(baseActiveElement);\n    var leftEntries = asArray(leftEntry);\n    var activeElement = activeElements[0];\n    var topCommon = false;\n    leftEntries.filter(Boolean).forEach(function (entry) {\n        topCommon = getCommonParent(topCommon || entry, entry) || topCommon;\n        rightEntries.filter(Boolean).forEach(function (subEntry) {\n            var common = getCommonParent(activeElement, subEntry);\n            if (common) {\n                if (!topCommon || contains(common, topCommon)) {\n                    topCommon = common;\n                }\n                else {\n                    topCommon = getCommonParent(common, topCommon);\n                }\n            }\n        });\n    });\n    // TODO: add assert here?\n    return topCommon;\n};\n/**\n * return list of nodes which are expected to be autofocused inside a given top nodes\n * @param entries\n * @param visibilityCache\n */\nexport var allParentAutofocusables = function (entries, visibilityCache) {\n    return entries.reduce(function (acc, node) { return acc.concat(parentAutofocusables(node, visibilityCache)); }, []);\n};\n","import { NEW_FOCUS, newFocus } from './solver';\nimport { getAllTabbableNodes, getTabbableNodes } from './utils/DOMutils';\nimport { getAllAffectedNodes } from './utils/all-affected';\nimport { asArray, getFirst } from './utils/array';\nimport { pickAutofocus } from './utils/auto-focus';\nimport { getActiveElement } from './utils/getActiveElement';\nimport { isDefined, isNotAGuard } from './utils/is';\nimport { allParentAutofocusables, getTopCommonParent } from './utils/parenting';\nvar reorderNodes = function (srcNodes, dstNodes) {\n    var remap = new Map();\n    // no Set(dstNodes) for IE11 :(\n    dstNodes.forEach(function (entity) { return remap.set(entity.node, entity); });\n    // remap to dstNodes\n    return srcNodes.map(function (node) { return remap.get(node); }).filter(isDefined);\n};\n/**\n * given top node(s) and the last active element return the element to be focused next\n * @param topNode\n * @param lastNode\n */\nexport var getFocusMerge = function (topNode, lastNode) {\n    var activeElement = getActiveElement(asArray(topNode).length > 0 ? document : getFirst(topNode).ownerDocument);\n    var entries = getAllAffectedNodes(topNode).filter(isNotAGuard);\n    var commonParent = getTopCommonParent(activeElement || topNode, topNode, entries);\n    var visibilityCache = new Map();\n    var anyFocusable = getAllTabbableNodes(entries, visibilityCache);\n    var innerElements = getTabbableNodes(entries, visibilityCache).filter(function (_a) {\n        var node = _a.node;\n        return isNotAGuard(node);\n    });\n    if (!innerElements[0]) {\n        innerElements = anyFocusable;\n        if (!innerElements[0]) {\n            return undefined;\n        }\n    }\n    var outerNodes = getAllTabbableNodes([commonParent], visibilityCache).map(function (_a) {\n        var node = _a.node;\n        return node;\n    });\n    var orderedInnerElements = reorderNodes(outerNodes, innerElements);\n    var innerNodes = orderedInnerElements.map(function (_a) {\n        var node = _a.node;\n        return node;\n    });\n    var newId = newFocus(innerNodes, outerNodes, activeElement, lastNode);\n    if (newId === NEW_FOCUS) {\n        var focusNode = pickAutofocus(anyFocusable, innerNodes, allParentAutofocusables(entries, visibilityCache));\n        if (focusNode) {\n            return { node: focusNode };\n        }\n        else {\n            console.warn('focus-lock: cannot find any node to move focus into');\n            return undefined;\n        }\n    }\n    if (newId === undefined) {\n        return newId;\n    }\n    return orderedInnerElements[newId];\n};\n","import { getTabbableNodes } from './utils/DOMutils';\nimport { getAllAffectedNodes } from './utils/all-affected';\nimport { isGuard, isNotAGuard } from './utils/is';\nimport { getTopCommonParent } from './utils/parenting';\n/**\n * return list of focusable elements inside a given top node\n * @deprecated use {@link getFocusableIn}. Yep, there is typo in the function name\n */\nexport var getFocusabledIn = function (topNode) {\n    var entries = getAllAffectedNodes(topNode).filter(isNotAGuard);\n    var commonParent = getTopCommonParent(topNode, topNode, entries);\n    var visibilityCache = new Map();\n    var outerNodes = getTabbableNodes([commonParent], visibilityCache, true);\n    var innerElements = getTabbableNodes(entries, visibilityCache)\n        .filter(function (_a) {\n        var node = _a.node;\n        return isNotAGuard(node);\n    })\n        .map(function (_a) {\n        var node = _a.node;\n        return node;\n    });\n    return outerNodes.map(function (_a) {\n        var node = _a.node, index = _a.index;\n        return ({\n            node: node,\n            index: index,\n            lockItem: innerElements.indexOf(node) >= 0,\n            guard: isGuard(node),\n        });\n    });\n};\n/**\n * return list of focusable elements inside a given top node\n */\nexport var getFocusableIn = getFocusabledIn;\n","import { getFocusMerge } from './focusMerge';\nexport var focusOn = function (target, focusOptions) {\n    if ('focus' in target) {\n        target.focus(focusOptions);\n    }\n    if ('contentWindow' in target && target.contentWindow) {\n        target.contentWindow.focus();\n    }\n};\nvar guardCount = 0;\nvar lockDisabled = false;\n/**\n * Sets focus at a given node. The last focused element will help to determine which element(first or last) should be focused.\n * HTML markers (see {@link import('./constants').FOCUS_AUTO} constants) can control autofocus\n * @param topNode\n * @param lastNode\n * @param options\n */\nexport var setFocus = function (topNode, lastNode, options) {\n    if (options === void 0) { options = {}; }\n    var focusable = getFocusMerge(topNode, lastNode);\n    if (lockDisabled) {\n        return;\n    }\n    if (focusable) {\n        if (guardCount > 2) {\n            // tslint:disable-next-line:no-console\n            console.error('FocusLock: focus-fighting detected. Only one focus management system could be active. ' +\n                'See https://github.com/theKashey/focus-lock/#focus-fighting');\n            lockDisabled = true;\n            setTimeout(function () {\n                lockDisabled = false;\n            }, 1);\n            return;\n        }\n        guardCount++;\n        focusOn(focusable.node, options.focusOptions);\n        guardCount--;\n    }\n};\n","export function deferAction(action) {\n  setTimeout(action, 1);\n}\nexport var inlineProp = function inlineProp(name, value) {\n  var obj = {};\n  obj[name] = value;\n  return obj;\n};","/* eslint-disable no-mixed-operators */\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport withSideEffect from 'react-clientside-effect';\nimport moveFocusInside, { focusInside, focusIsHidden, getFocusabledIn } from 'focus-lock';\nimport { deferAction } from './util';\nimport { mediumFocus, mediumBlur, mediumEffect } from './medium';\n\nvar focusOnBody = function focusOnBody() {\n  return document && document.activeElement === document.body;\n};\n\nvar isFreeFocus = function isFreeFocus() {\n  return focusOnBody() || focusIsHidden();\n};\n\nvar lastActiveTrap = null;\nvar lastActiveFocus = null;\nvar lastPortaledElement = null;\nvar focusWasOutsideWindow = false;\n\nvar defaultWhitelist = function defaultWhitelist() {\n  return true;\n};\n\nvar focusWhitelisted = function focusWhitelisted(activeElement) {\n  return (lastActiveTrap.whiteList || defaultWhitelist)(activeElement);\n};\n\nvar recordPortal = function recordPortal(observerNode, portaledElement) {\n  lastPortaledElement = {\n    observerNode: observerNode,\n    portaledElement: portaledElement\n  };\n};\n\nvar focusIsPortaledPair = function focusIsPortaledPair(element) {\n  return lastPortaledElement && lastPortaledElement.portaledElement === element;\n};\n\nfunction autoGuard(startIndex, end, step, allNodes) {\n  var lastGuard = null;\n  var i = startIndex;\n\n  do {\n    var item = allNodes[i];\n\n    if (item.guard) {\n      if (item.node.dataset.focusAutoGuard) {\n        lastGuard = item;\n      }\n    } else if (item.lockItem) {\n      if (i !== startIndex) {\n        // we will tab to the next element\n        return;\n      }\n\n      lastGuard = null;\n    } else {\n      break;\n    }\n  } while ((i += step) !== end);\n\n  if (lastGuard) {\n    lastGuard.node.tabIndex = 0;\n  }\n}\n\nvar extractRef = function extractRef(ref) {\n  return ref && 'current' in ref ? ref.current : ref;\n};\n\nvar focusWasOutside = function focusWasOutside(crossFrameOption) {\n  if (crossFrameOption) {\n    // with cross frame return true for any value\n    return Boolean(focusWasOutsideWindow);\n  } // in other case return only of focus went a while aho\n\n\n  return focusWasOutsideWindow === 'meanwhile';\n};\n\nvar checkInHost = function checkInHost(check, el, boundary) {\n  return el && ( // find host equal to active element and check nested active element\n  el.host === check && (!el.activeElement || boundary.contains(el.activeElement)) // dive up\n  || el.parentNode && checkInHost(check, el.parentNode, boundary));\n};\n\nvar withinHost = function withinHost(activeElement, workingArea) {\n  return workingArea.some(function (area) {\n    return checkInHost(activeElement, area, area);\n  });\n};\n\nvar activateTrap = function activateTrap() {\n  var result = false;\n\n  if (lastActiveTrap) {\n    var _lastActiveTrap = lastActiveTrap,\n        observed = _lastActiveTrap.observed,\n        persistentFocus = _lastActiveTrap.persistentFocus,\n        autoFocus = _lastActiveTrap.autoFocus,\n        shards = _lastActiveTrap.shards,\n        crossFrame = _lastActiveTrap.crossFrame,\n        focusOptions = _lastActiveTrap.focusOptions;\n    var workingNode = observed || lastPortaledElement && lastPortaledElement.portaledElement;\n    var activeElement = document && document.activeElement;\n\n    if (workingNode) {\n      var workingArea = [workingNode].concat(shards.map(extractRef).filter(Boolean));\n\n      if (!activeElement || focusWhitelisted(activeElement)) {\n        if (persistentFocus || focusWasOutside(crossFrame) || !isFreeFocus() || !lastActiveFocus && autoFocus) {\n          if (workingNode && !( // active element is \"inside\" working area\n          focusInside(workingArea) || // check for shadow-dom contained elements\n          activeElement && withinHost(activeElement, workingArea) || focusIsPortaledPair(activeElement, workingNode))) {\n            if (document && !lastActiveFocus && activeElement && !autoFocus) {\n              // Check if blur() exists, which is missing on certain elements on IE\n              if (activeElement.blur) {\n                activeElement.blur();\n              }\n\n              document.body.focus();\n            } else {\n              result = moveFocusInside(workingArea, lastActiveFocus, {\n                focusOptions: focusOptions\n              });\n              lastPortaledElement = {};\n            }\n          }\n\n          focusWasOutsideWindow = false;\n          lastActiveFocus = document && document.activeElement;\n        }\n      }\n\n      if (document) {\n        var newActiveElement = document && document.activeElement;\n        var allNodes = getFocusabledIn(workingArea);\n        var focusedIndex = allNodes.map(function (_ref) {\n          var node = _ref.node;\n          return node;\n        }).indexOf(newActiveElement);\n\n        if (focusedIndex > -1) {\n          // remove old focus\n          allNodes.filter(function (_ref2) {\n            var guard = _ref2.guard,\n                node = _ref2.node;\n            return guard && node.dataset.focusAutoGuard;\n          }).forEach(function (_ref3) {\n            var node = _ref3.node;\n            return node.removeAttribute('tabIndex');\n          });\n          autoGuard(focusedIndex, allNodes.length, +1, allNodes);\n          autoGuard(focusedIndex, -1, -1, allNodes);\n        }\n      }\n    }\n  }\n\n  return result;\n};\n\nvar onTrap = function onTrap(event) {\n  if (activateTrap() && event) {\n    // prevent scroll jump\n    event.stopPropagation();\n    event.preventDefault();\n  }\n};\n\nvar onBlur = function onBlur() {\n  return deferAction(activateTrap);\n};\n\nvar onFocus = function onFocus(event) {\n  // detect portal\n  var source = event.target;\n  var currentNode = event.currentTarget;\n\n  if (!currentNode.contains(source)) {\n    recordPortal(currentNode, source);\n  }\n};\n\nvar FocusWatcher = function FocusWatcher() {\n  return null;\n};\n\nvar FocusTrap = function FocusTrap(_ref4) {\n  var children = _ref4.children;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    onBlur: onBlur,\n    onFocus: onFocus\n  }, children);\n};\n\nFocusTrap.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: PropTypes.node.isRequired\n} : {};\n\nvar onWindowBlur = function onWindowBlur() {\n  focusWasOutsideWindow = 'just'; // using setTimeout to set  this variable after React/sidecar reaction\n\n  deferAction(function () {\n    focusWasOutsideWindow = 'meanwhile';\n  });\n};\n\nvar attachHandler = function attachHandler() {\n  document.addEventListener('focusin', onTrap);\n  document.addEventListener('focusout', onBlur);\n  window.addEventListener('blur', onWindowBlur);\n};\n\nvar detachHandler = function detachHandler() {\n  document.removeEventListener('focusin', onTrap);\n  document.removeEventListener('focusout', onBlur);\n  window.removeEventListener('blur', onWindowBlur);\n};\n\nfunction reducePropsToState(propsList) {\n  return propsList.filter(function (_ref5) {\n    var disabled = _ref5.disabled;\n    return !disabled;\n  });\n}\n\nfunction handleStateChangeOnClient(traps) {\n  var trap = traps.slice(-1)[0];\n\n  if (trap && !lastActiveTrap) {\n    attachHandler();\n  }\n\n  var lastTrap = lastActiveTrap;\n  var sameTrap = lastTrap && trap && trap.id === lastTrap.id;\n  lastActiveTrap = trap;\n\n  if (lastTrap && !sameTrap) {\n    lastTrap.onDeactivation(); // return focus only of last trap was removed\n\n    if (!traps.filter(function (_ref6) {\n      var id = _ref6.id;\n      return id === lastTrap.id;\n    }).length) {\n      // allow defer is no other trap is awaiting restore\n      lastTrap.returnFocus(!trap);\n    }\n  }\n\n  if (trap) {\n    lastActiveFocus = null;\n\n    if (!sameTrap || lastTrap.observed !== trap.observed) {\n      trap.onActivation();\n    }\n\n    activateTrap(true);\n    deferAction(activateTrap);\n  } else {\n    detachHandler();\n    lastActiveFocus = null;\n  }\n} // bind medium\n\n\nmediumFocus.assignSyncMedium(onFocus);\nmediumBlur.assignMedium(onBlur);\nmediumEffect.assignMedium(function (cb) {\n  return cb({\n    moveFocusInside: moveFocusInside,\n    focusInside: focusInside\n  });\n});\nexport default withSideEffect(reducePropsToState, handleStateChangeOnClient)(FocusWatcher);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport FocusLockUI from './Lock';\nimport FocusTrap from './Trap';\n/* that would be a BREAKING CHANGE!\n// delaying sidecar execution till the first usage\nconst RequireSideCar = (props) => {\n  // eslint-disable-next-line global-require\n  const SideCar = require('./Trap').default;\n  return <SideCar {...props} />;\n};\n*/\n\nvar FocusLockCombination = /*#__PURE__*/React.forwardRef(function FocusLockUICombination(props, ref) {\n  return /*#__PURE__*/React.createElement(FocusLockUI, _extends({\n    sideCar: FocusTrap,\n    ref: ref\n  }, props));\n});\n\nvar _ref = FocusLockUI.propTypes || {},\n    sideCar = _ref.sideCar,\n    propTypes = _objectWithoutPropertiesLoose(_ref, [\"sideCar\"]);\n\nFocusLockCombination.propTypes = process.env.NODE_ENV !== \"production\" ? propTypes : {};\nexport default FocusLockCombination;","import * as React from \"react\";\r\nimport FocusLock from \"react-focus-lock\";\r\n\r\nexport interface FocusTrapProps\r\n  extends React.ComponentProps<typeof FocusLock> {\r\n  /**\r\n   * The content for the Focus Trap\r\n   */\r\n  children: React.ReactNode;\r\n  /**\r\n   * If the Focus Trap return focus to trigger\r\n   *\r\n   * @default true\r\n   */\r\n  returnFocus?: boolean;\r\n}\r\n\r\n/**\r\n * @public\r\n *\r\n * @description\r\n *\r\n * The Focus Trap component traps the users focus within a DOM node.\r\n */\r\nexport const FocusTrap: React.FC<FocusTrapProps> = (props) => {\r\n  const { children, returnFocus = true, ...rest } = props;\r\n\r\n  return (\r\n    <FocusLock returnFocus={returnFocus} {...rest}>\r\n      {children}\r\n    </FocusLock>\r\n  );\r\n};\r\n\r\nFocusTrap.displayName = \"FocusTrap\";\r\n"],"names":["FOCUS_GROUP","FOCUS_DISABLED","FOCUS_ALLOW","FOCUS_AUTO","FOCUS_NO_AUTOFOCUS","hiddenGuard","mediumFocus","createMedium","_ref","target","currentTarget","mediumBlur","mediumEffect","mediumSidecar","createSidecarMedium","emptyArray","FocusLock","React.forwardRef","props","parentRef","_extends2","_React$useState","React.useState","realObserved","setObserved","observed","React.useRef","isActive","originalFocusedElement","children","disabled","noFocusGuards","persistentFocus","crossFrame","autoFocus","group","className","whiteList","hasPositiveIndices","_props$shards","shards","_props$as","Container","_props$lockProps","containerProps","SideCar","shouldReturnFocus","focusOptions","onActivationCallback","onDeactivationCallback","_React$useState2","id","onActivation","React.useCallback","onDeactivation","useEffect","returnFocus","allowDefer","returnFocusTo","howToReturnFocus","returnFocusOptions","onFocus","event","onBlur","setObserveNode","newObserved","lockProps","_extends","constants.FOCUS_DISABLED","constants.FOCUS_GROUP","hasLeadingGuards","hasTailingGuards","mergedRef","useMergeRefs","React.createElement","React.Fragment","FocusLockUI","withSideEffect","reducePropsToState","handleStateChangeOnClient","getDisplayName","WrappedComponent","mountedInstances","state","emitChange","instance","SideEffect","_PureComponent","_inheritsLoose","_proto","index","React","PureComponent","_defineProperty","toArray","a","ret","i","asArray","getFirst","isElementHidden","node","computedStyle","getParentNode","isTopNode","isVisibleUncached","checkParent","isVisibleCached","visibilityCache","cached","result","isAutoFocusAllowedUncached","isAutoFocusAllowed","isAutoFocusAllowedCached","cache","getDataset","isHTMLButtonElement","isHTMLInputElement","isRadioElement","notHiddenInput","attribute","isGuard","_a","isNotAGuard","isDefined","x","tabSort","b","tabDiff","indexDiff","orderByTabIndex","nodes","filterNegative","keepGuards","data","tabbables","queryTabbables","queryGuardTabbables","getFocusablesWithShadowDom","parent","withGuards","acc","child","getFocusablesWithIFrame","getFocusables","parents","focusableWithShadowDom","focusableWithIframes","getParentAutofocusables","parentFocus","filterFocusable","filterAutoFocusable","getTabbableNodes","topNodes","getAllTabbableNodes","parentAutofocusables","topNode","contains","scope","element","iframeBody","filterNested","contained","l","j","position","_","getTopParent","getAllAffectedNodes","currentNode","safeProbe","cb","getActiveElement","inDocument","activeElement","focusInFrame","frame","focusInsideIframe","focusInside","focusIsHidden","findSelectedRadio","el","correctNode","correctNodes","resultSet","pickFirstFocus","pickFocusable","NEW_FOCUS","newFocus","innerNodes","outerNodes","lastNode","cnt","firstFocus","lastFocus","isOnGuard","activeIndex","lastIndex","lastNodeInside","firstNodeIndex","lastNodeIndex","correctedNodes","correctedIndex","correctedIndexDiff","returnFirstNode","returnLastNode","findAutoFocused","autoFocusables","autofocus","pickAutofocus","nodesIndexes","orderedNodes","groups","autoFocusable","getParents","getCommonParent","nodeA","nodeB","parentsA","parentsB","currentParent","getTopCommonParent","baseActiveElement","leftEntry","rightEntries","activeElements","leftEntries","topCommon","entry","subEntry","common","allParentAutofocusables","entries","reorderNodes","srcNodes","dstNodes","remap","entity","getFocusMerge","commonParent","anyFocusable","innerElements","orderedInnerElements","newId","focusNode","getFocusabledIn","focusOn","guardCount","lockDisabled","setFocus","options","focusable","deferAction","action","focusOnBody","isFreeFocus","lastActiveTrap","lastActiveFocus","lastPortaledElement","focusWasOutsideWindow","defaultWhitelist","focusWhitelisted","recordPortal","observerNode","portaledElement","focusIsPortaledPair","autoGuard","startIndex","end","step","allNodes","lastGuard","item","extractRef","ref","focusWasOutside","crossFrameOption","checkInHost","check","boundary","withinHost","workingArea","area","activateTrap","_lastActiveTrap","workingNode","moveFocusInside","newActiveElement","focusedIndex","_ref2","guard","_ref3","onTrap","source","FocusWatcher","onWindowBlur","attachHandler","detachHandler","propsList","_ref5","traps","trap","lastTrap","sameTrap","_ref6","FocusTrap$1","FocusLockCombination","FocusTrap","_objectWithoutPropertiesLoose","rest","jsx"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]}